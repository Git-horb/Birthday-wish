<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Special Message for Emily</title>
    
    <style>
        /* General Styling */
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            text-align: center;
            background: linear-gradient(135deg, #fde3e9, #ffdde1);
            color: #5d4955;
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }

        .content-box {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            max-width: 600px;
            margin: 40px auto;
        }

        h1 {
            color: #d93f87;
            font-size: 2.5rem;
        }

        h2.khmer-text {
            font-size: 1.8rem;
            color: #e85a9b;
            font-weight: normal;
        }

        /* Countdown Screen Styling */
        #countdown-screen {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
        }

        #timer {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        #timer .box {
            background: #fff;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            min-width: 60px;
        }

        #timer .box span {
            display: block;
            font-size: 2rem;
            font-weight: bold;
            color: #d93f87;
        }

        /* Birthday Screen Styling */
        #birthday-screen {
            display: none;
            animation: fadeIn 2s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .david-message {
            font-size: 1.3rem;
            font-weight: bold;
            color: #d93f87;
            margin: 20px 0;
            padding: 15px;
            background: #fff;
            border-radius: 10px;
            border-left: 5px solid #e85a9b;
        }
        
        /* New Image Styling */
        .birthday-card-image {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
            border: 3px solid #ff99c8; /* Soft pink border */
        }

        .message-from-image, .more-talks {
            max-width: 600px;
            margin: 20px auto;
            text-align: left;
            line-height: 1.7;
            background: rgba(255, 255, 255, 0.7);
            padding: 20px;
            border-radius: 10px;
        }

        .message-from-image .love {
            text-align: right;
            font-weight: bold;
            font-style: italic;
            color: #e85a9b;
        }

        hr {
            border: 0;
            height: 1px;
            background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(217, 63, 135, 0.75), rgba(0, 0, 0, 0));
            margin: 40px 0;
        }

        blockquote {
            font-style: italic;
            color: #777;
            border-left: 4px solid #fde3e9;
            padding-left: 15px;
            margin: 20px 0;
        }

        /* Floating Hearts Animation */
        .hearts-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 10;
        }

        .heart {
            position: absolute;
            bottom: -50px;
            font-size: 1.5rem;
            animation: float 15s linear infinite;
            opacity: 0.7;
        }

        @keyframes float {
            0% { transform: translateY(0); opacity: 0.7; }
            100% { transform: translateY(-100vh); opacity: 0; }
        }

        /* Choir Effect Styling */
        .choir-member {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0;
            opacity: 0;
            color: #d93f87;
            pointer-events: none;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.7);
            animation: singOut 3s ease-out forwards;
            z-index: 20; /* Ensure text is above everything */
        }

        .choir-member:nth-child(even) {
            color: #e85a9b;
            animation-delay: 0.2s;
        }

        @keyframes singOut {
            0% {
                font-size: 0;
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            50% {
                font-size: 4rem;
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                font-size: 3rem;
                opacity: 0;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        /* Audio Player Styling */
        audio {
            display: none;
        }
    </style>
</head>
<body>

    <div class="hearts-container"></div>

    <div id="countdown-screen">
        <div class="content-box">
            <h1>Something special is happening...</h1>
            <p>For a very special person.</p>
            <div id="timer">
                <div class="box"><span id="days">00</span>Days</div>
                <div class="box"><span id="hours">00</span>Hours</div>
                <div class="box"><span id="minutes">00</span>Minutes</div>
                <div class="box"><span id="seconds">00</span>Seconds</div>
            </div>
        </div>
    </div>

    <div id="birthday-screen">
        
        <h1>Happy Birthday, Emily!</h1>
        <h2 class="khmer-text">រីករាយ​ថ្ងៃ​កំណើត</h2>
        
        <div class="david-message">
            <p>ដេវីត សូមជូនពរអ្នកនូវថ្ងៃកំណើតដ៏ពិសេស ហើយគាត់ពិតជាយកចិត្តទុកដាក់ មានសុភមង្គលច្រើនឆ្នាំទៅមុខទៀត។ .</p>
        </div>

        <audio id="birthdaySong" src="https://cdn.davex.site/cdn/audio/Hbd-emly.mp3" preload="auto"></audio>
        
        <div id="choir-effect"></div>

        <img src="https://images.unsplash.com/photo-1549488344-938b81d48c08?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w0NTMzNXwwfDF8c2VhcmNofDE5fHxzb2Z0JTIwcGluayUyMGJpcnRoZGF5JTIwY2FyZHxlbnwwfHx8fDE3MDAxNTA0NTZ8MA&ixlib=rb-4.0.3&q=80&w=1080" alt="A beautiful, soft pink birthday card with flowers" class="birthday-card-image">

        <div class="message-from-image">
            <p>From the day we met, I knew you were someone special. Your friendship has brought so much light and laughter into my life, and I'm so grateful for every moment.</p>
            <p>Watching you chase your dreams is inspiring, and I'm so incredibly proud of the person you are. You deserve all the happiness, joy, and success in the world today and always.</p>
            <p>Sending you all my best wishes on your special day. I hope it's as amazing as you are.</p>
            <p class="love">ស្នេហា, David</p>
        </div>

        <hr>

        <div class="more-talks">
            <h3>A Few More Words...</h3>
            <p>Emily, you have a kindness that brightens every room and a heart that is so full of love. I hope this day brings you even a fraction of the joy you give to everyone around you.</p>
            <p>Never change who you are. The world is so much better for having you in it.</p>
            
            <blockquote>
                "The best and most beautiful things in the world cannot be seen or even touched - they must be felt with the heart." <br>- David..
            </blockquote>
            <blockquote>
                "Count your life by smiles, not tears. Count your age by friends, not years. Happy birthday!"
            </blockquote>
        </div>

    </div>

    <script>
         <script>
      // --- DATE SETTING ---
        // Current date is Nov 5, 2025. Birthday is Nov 7.
        // NOTE: JavaScript counts months from 0 (Jan=0, Feb=1... Nov=10)
        const birthdayDate = new Date(2025, 10, 7, 0, 0, 0).getTime();

        // Get the elements from the HTML
        const countdownScreen = document.getElementById('countdown-screen');
        const birthdayScreen = document.getElementById('birthday-screen');
        const heartsContainer = document.querySelector('.hearts-container');
        const birthdaySong = document.getElementById('birthdaySong');
        const choirEffectContainer = document.getElementById('choir-effect');

        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');

        const timerInterval = setInterval(updateTimer, 1000);

        function updateTimer() {
            const now = new Date().getTime();
            const distance = birthdayDate - now;

            if (distance < 0) {
                clearInterval(timerInterval);
                showBirthdayPage();
                return;
            }

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            daysEl.innerHTML = days < 10 ? '0' + days : days;
            hoursEl.innerHTML = hours < 10 ? '0' + hours : hours;
            minutesEl.innerHTML = minutes < 10 ? '0' + minutes : minutes;
            secondsEl.innerHTML = seconds < 10 ? '0' + seconds : seconds;
        }

        function showBirthdayPage() {
            countdownScreen.style.display = 'none';
            birthdayScreen.style.display = 'block';

            createHearts();

            // Attempt to play the song
            birthdaySong.play().catch(error => {
                console.log("Autoplay prevented:", error);
                // Create a temporary play button for the user if autoplay fails
                const playButton = document.createElement('button');
                playButton.textContent = ".";
                playButton.style.cssText = 'padding: 10px 20px; background-color: #d93f87; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;';
                playButton.onclick = () => {
                    birthdaySong.play();
                    playButton.remove();
                };
                // Insert the button before the David message for visibility
                birthdayScreen.insertBefore(playButton, document.querySelector('.david-message'));
            });
            
            startChoirEffect();
        }

        // --- Heart Animation Functions ---
        function createHearts() {
            setInterval(createAHeart, 300);
        }

        function createAHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = '❤️';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = Math.random() * 5 + 10 + 's';
            heartsContainer.appendChild(heart);
            setTimeout(() => { heart.remove(); }, 15000);
        }

        // --- Choir Effect Functions ---
        const choirLyrics = [
            "Happy Birthday",
            "to you!",
            "Happy Birthday",
            "dear Emily!",
            "Happy Birthday",
            "to you!"
        ];
        let currentLyricIndex = 0;

        function startChoirEffect() {
            choirEffectContainer.innerHTML = '';
            currentLyricIndex = 0;
            // The interval is set to 1500ms (1.5 seconds) to match a standard singing pace.
            const choirInterval = setInterval(() => {
                if (currentLyricIndex < choirLyrics.length) {
                    createChoirMember(choirLyrics[currentLyricIndex]);
                    currentLyricIndex++;
                } else {
                    // Loop the song and effect after all lyrics are shown
                    currentLyricIndex = 0;
                    birthdaySong.currentTime = 0;
                    birthdaySong.play();
                }
            }, 1500); 
        }

        function createChoirMember(text) {
            const choirMember = document.createElement('div');
            choirMember.classList.add('choir-member');
            choirMember.textContent = text;
            
            // Randomize position slightly around the center
            choirMember.style.left = `calc(${Math.random() * 40 + 30}vw)`;
            choirMember.style.top = `calc(${Math.random() * 40 + 30}vh)`;
            
            choirEffectContainer.appendChild(choirMember);

            setTimeout(() => { choirMember.remove(); }, 3000);
        }

        updateTimer();
    </script>
</body>
</html>
